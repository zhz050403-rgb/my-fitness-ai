<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI æ·±åº¦ç§æ•™è¯„ä¼°ç³»ç»Ÿ</title>
    <script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/marked/4.0.2/marked.min.js"></script>
    <style>
        :root { --primary: #007aff; --bg: #f0f2f5; --card-bg: #ffffff; --text: #333; }
        body { 
            margin: 0; padding: 0; background-color: #d12d6c; /* èƒŒæ™¯é¢œè‰²å‚è€ƒå›¾ç‰‡ä¸­çš„ä¾§è¾¹é¢œè‰² */
            background-image: linear-gradient(180deg, #d12d6c 0%, #a21b4b 100%);
            font-family: -apple-system, "SF Pro Text", "Helvetica Neue", sans-serif;
            display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; padding-top: 20px;
        }
        .main-card { 
            width: 92%; max-width: 480px; background: #e9ecef; border-radius: 24px; 
            padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); margin-bottom: 40px;
        }
        .header { text-align: center; margin-bottom: 20px; color: #1e1b4b; font-weight: bold; font-size: 1.2rem; }
        .header span { margin-right: 8px; }

        /* å¡ç‰‡å†…éƒ¨å®¹å™¨ */
        .content-box { background: white; border-radius: 18px; padding: 20px; margin-bottom: 15px; }

        /* æ¿€æ´»ç åŒºåŸŸ */
        .auth-section { background: #e7f3ff; border-radius: 12px; padding: 15px; text-align: center; margin-bottom: 20px; }
        .auth-section input { 
            width: 90%; border: none; background: transparent; font-size: 1.1rem; 
            text-align: center; outline: none; color: var(--primary); font-weight: bold;
        }
        .auth-tip { font-size: 0.75rem; color: #666; margin-top: 8px; }

        /* é¢˜ç›®/è¡¨å•æ ·å¼ */
        .section-title { color: #0056b3; font-size: 0.95rem; font-weight: bold; margin-bottom: 15px; border-left: 4px solid #0056b3; padding-left: 10px; }
        .label { font-size: 0.85rem; color: #666; margin-bottom: 8px; display: block; }
        
        .opt-grid { display: grid; grid-template-columns: 1fr; gap: 10px; }
        .opt-item { 
            background: #f8f9fa; border: 1px solid #eee; padding: 14px; border-radius: 12px;
            font-size: 0.95rem; cursor: pointer; transition: all 0.2s;
        }
        .opt-item:active { background: #e7f3ff; border-color: var(--primary); color: var(--primary); }

        /* è¿›åº¦æ¡ */
        .prog-container { height: 4px; background: #ddd; border-radius: 2px; margin-bottom: 20px; overflow: hidden; }
        .prog-bar { height: 100%; background: var(--primary); width: 5%; transition: 0.3s; }

        .submit-btn { 
            width: 100%; background: #1a1a1a; color: white; border: none; padding: 18px;
            border-radius: 12px; font-weight: bold; font-size: 1rem; cursor: pointer; margin-top: 10px;
        }
        
        #result-page { display: none; background: white; min-height: 100vh; width: 100%; position: absolute; top: 0; left: 0; z-index: 100; padding: 25px; box-sizing: border-box; }
        .loader { display: none; text-align: center; font-size: 0.9rem; color: #666; margin-top: 15px; }
    </style>
</head>
<body>

<div class="main-card" id="app">
    <div class="header">ğŸ¯ AI æ·±åº¦ç§æ•™è¯„ä¼°ç³»ç»Ÿ</div>

    <div class="auth-section">
        <input type="text" id="activationCode" placeholder="è¯·è¾“å…¥æ¿€æ´»ç ">
        <div class="auth-tip">* æˆæƒç ä»…é™å•æ¬¡è¯„ä¼°ï¼Œè¯·ç”ŸæˆååŠæ—¶æˆªå›¾</div>
    </div>

    <div class="prog-container"><div class="prog-bar" id="prog-bar"></div></div>

    <div class="content-box" id="quiz-container">
        <div class="section-title" id="quiz-index">1. åŸºç¡€æŒ‡æ ‡</div>
        <span class="label" id="quiz-question">æ­£åœ¨åŠ è½½è¯„ä¼°é¢˜ç›®...</span>
        <div class="opt-grid" id="opts-box"></div>
    </div>

    <div class="content-box" id="status-container" style="display:none;">
        <div class="section-title">2. èº«ä½“çŠ¶æ€</div>
        <span class="label">å¦‚æœ‰è…°é…¸ã€è†ç›–å“ã€ç°é˜¶æ®µç–¼ç—›è¯·åŠ¡å¿…å¡«å†™...</span>
        <textarea id="extra-info" style="width:100%; border:1px solid #eee; border-radius:12px; height:80px; padding:10px; box-sizing:border-box;" placeholder="ä¾‹å¦‚ï¼šä¹…åè…°ç—›ï¼Œå·¦è†ç›–å¼¹å“..."></textarea>
    </div>

    <button class="submit-btn" id="final-btn" onclick="handleFinal()" style="display:none;">ç”Ÿæˆä¸“å±æ·±åº¦è®¡åˆ’</button>
    <div id="loading" class="loader">ğŸš€ AI æ­£åœ¨æ·±åº¦å»ºæ¨¡ï¼Œè¯·ç¨å...</div>
</div>

<div id="result-page">
    <div id="md-body"></div>
    <button onclick="location.reload()" style="width:100%; padding:15px; border:none; background:#eee; border-radius:12px; margin-top:30px;">é‡æ–°æµ‹è¯„</button>
</div>

<script>
    const KEY = "sk-d37975a862d84a7580adf1759cee3a1a"; // ğŸš¨ å¡«å…¥ Key

    const questions = [
        { q: "æ‚¨çš„æ€§åˆ«ï¼Ÿ", opts: ["å¥³ç”Ÿ", "ç”·ç”Ÿ"] },
        { q: "ä¾§èº«çœ‹ï¼Œè€³å‚æ˜¯å¦æ˜æ˜¾åœ¨è‚©è†€å‰æ–¹ï¼Ÿ", opts: ["å¤´å‰ä¼¸", "åŸºæœ¬å‚ç›´", "ä¸ç¡®å®š"] },
        { q: "è‡ªç„¶ç«™ç«‹ï¼Œæ‰‹æŒå¿ƒçš„æœå‘ï¼Ÿ", opts: ["å‘å(åœ†è‚©)", "å‘å¤§è…¿(æ­£å¸¸)", "ä¸ç¡®å®š"] },
        { q: "é•œä¸­è§‚å¯Ÿï¼Œé”éª¨çš„å½¢æ€ï¼Ÿ", opts: ["æ˜æ˜¾çš„Vå‹", "å¹³ç›´ä¸€å­—å‹", "çœ‹ä¸æ¸…"] },
        { q: "åŒè‚©æ˜¯å¦æœ‰æ˜æ˜¾é«˜ä½ä¸ä¸€ï¼Ÿ", opts: ["å·¦é«˜å³ä½", "å³é«˜å·¦ä½", "åŸºæœ¬é½å¹³"] },
        { q: "é å¢™ç«™ï¼Œåè„‘å‹ºèƒ½å¦è½»æ¾è´´å¢™ï¼Ÿ", opts: ["è´´ä¸åˆ°", "è½»æ¾è´´åˆ°", "è´´åˆ°ä½†åƒåŠ›"] },
        { q: "è…°ä¸å¢™ä¹‹é—´ç©ºéš™å¯å¡è¿›ï¼Ÿ", opts: ["æ•´ä¸ªæ‹³å¤´", "ä¸€ä¸ªæ‰‹æŒ", "æ²¡ç¼éš™"] },
        { q: "å››è‚¢ä¸èƒ–ä½†å°è…¹æ˜æ˜¾å‰å‡¸ï¼Ÿ", opts: ["å¾ˆæ˜æ˜¾", "å¶å°”", "æ²¡æœ‰"] },
        { q: "æ˜¯å¦æœ‰ç»å¸¸æ€§éª¨ç›†æ—‹è½¬æ„Ÿï¼Ÿ", opts: ["æœ‰", "æ— ", "ä¸ç¡®å®š"] },
        { q: "å¹¶è„šä¸‹è¹²ï¼Œè„šåè·Ÿèƒ½è¸©å®å—ï¼Ÿ", opts: ["è¸©ä¸å®(ä¼šå€’)", "è½»æ¾è¸©å®", "æ¯”è¾ƒè´¹åŠ²"] },
        { q: "è§‚å¯Ÿé‹åº•ï¼Œå“ªä¾§ç£¨æŸæ›´ä¸¥é‡ï¼Ÿ", opts: ["å¤–ä¾§å¤š", "å†…ä¾§å¤š", "è¾ƒå‡åŒ€"] },
        { q: "ä¹…åä¸€å°æ—¶åï¼Œå“ªé‡Œæœ€ä¸èˆ’æœï¼Ÿ", opts: ["é¢ˆå/æ–œæ–¹è‚Œ", "ä¸‹è…°éƒ¨", "è‡€éƒ¨/è…¿éº»"] },
        { q: "å¹³æ—¶æ˜¯å¦æœ‰ä¹ æƒ¯æ€§ç¿˜äºŒéƒè…¿ï¼Ÿ", opts: ["ç»å¸¸ç¿˜", "å¶å°”", "åŸºæœ¬ä¸ç¿˜"] },
        { q: "åŒæ‰‹å‘åèƒŒå‹¾ï¼Œèƒ½å¦æŒ‡å°–ç›¸æ‰£ï¼Ÿ", opts: ["å·®å¾ˆè¿œ", "å‹‰å¼ºç¢°åˆ°", "è½»æ¾ç›¸æ‰£"] },
        { q: "æ·±å‘¼å¸æ—¶ï¼Œä¸»è¦æ˜¯èƒ¸å£èµ·ä¼å—ï¼Ÿ", opts: ["æ˜¯çš„(æµ…å‘¼å¸)", "è…¹éƒ¨èµ·ä¼", "éƒ½æœ‰"] },
        { q: "èƒŒéƒ¨è‚©èƒ›éª¨æ˜¯å¦åƒç¿…è†€èˆ¬å‡¸èµ·ï¼Ÿ", opts: ["æ˜æ˜¾å‡¸èµ·", "å¹³æ•´è´´åˆ", "ç•¥å¾®å‡¸èµ·"] },
        { q: "è½¬åŠ¨è„–å­æ—¶æ˜¯å¦æœ‰å“å£°ï¼Ÿ", opts: ["ç»å¸¸å“", "å¶å°”å“", "ä»æœªå“è¿‡"] },
        { q: "æ¯å¤©ä½å¤´æ—¶é•¿ï¼Ÿ", opts: ["8å°æ—¶ä»¥ä¸Š", "4-8å°æ—¶", "4å°æ—¶ä»¥å†…"] },
        { q: "æ‚¨çš„ä¸»è¦ç›®æ ‡ï¼Ÿ", opts: ["ä½“æ€çº æ­£", "å‡è„‚å¡‘å½¢", "ç¼“è§£ç–¼ç—›"] },
        { q: "ç»ƒä¹ ç¯å¢ƒï¼Ÿ", opts: ["å±…å®¶æ— å™¨æ¢°", "å¥èº«æˆ¿å…¨å™¨æ"] }
    ];

    let currentIdx = 0;
    let results = [];

    function render() {
        const q = questions[currentIdx];
        document.getElementById('quiz-index').innerText = `${currentIdx + 1}. è¯„ä¼°ç¯èŠ‚`;
        document.getElementById('quiz-question').innerText = q.q;
        document.getElementById('prog-bar').style.width = ((currentIdx + 1) / 20) * 100 + '%';
        
        const box = document.getElementById('opts-box');
        box.innerHTML = '';
        q.opts.forEach(o => {
            const div = document.createElement('div');
            div.className = 'opt-item';
            div.innerText = o;
            div.onclick = () => {
                results.push(`${q.q}: ${o}`);
                if(currentIdx < 19) {
                    currentIdx++; render();
                } else {
                    document.getElementById('quiz-container').style.display = 'none';
                    document.getElementById('status-container').style.display = 'block';
                    document.getElementById('final-btn').style.display = 'block';
                }
            };
            box.appendChild(div);
        });
    }

    async function handleFinal() {
        const code = document.getElementById('activationCode').value;
        const parts = code.split('-');
        if(parts.length !== 2) return alert("è¯·è¾“å…¥æ­£ç¡®æ ¼å¼çš„æ¿€æ´»ç  (       )");

        const sum1 = parts[0].split('').reduce((a, b) => a + b.charCodeAt(0), 0);
        const sum2 = parts[1].split('').reduce((a, b) => a + b.charCodeAt(0), 0);

        if(sum1 !== 543 || sum2 !== 618) {
            return alert("æ¿€æ´»ç æ— æ•ˆï¼Œè¯·æ ¸å¯¹åå†è¯•ã€‚");
        }

        document.getElementById('loading').style.display = 'block';
        const extra = document.getElementById('extra-info').value;

        try {
            const res = await fetch("https://api.deepseek.com/chat/completions", {
                method: "POST",
                headers: { "Content-Type": "application/json", "Authorization": `Bearer ${KEY}` },
                body: JSON.stringify({
                    model: "deepseek-chat",
                    messages: [
                        {role: "system", content: "ä½ æ˜¯ä¸€ä½ç²¾é€šäººä½“çš„ç§æ•™ã€‚ç”¨ä¸“ä¸šMarkdownæ ¼å¼æä¾›çº æ­£æŠ¥å‘Šã€‚"},
                        {role: "user", content: `ç”¨æˆ·æµ‹è¯„ï¼š${results.join('; ')}ã€‚è¡¥å……ï¼š${extra}ã€‚`}
                    ]
                })
            });
            const data = await res.json();
            document.getElementById('md-body').innerHTML = marked.parse(data.choices[0].message.content);
            document.getElementById('result-page').style.display = 'block';
        } catch(e) {
            alert("ç”Ÿæˆå¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ");
            document.getElementById('loading').style.display = 'none';
        }
    }

    window.onload = render;
</script>
</body>
</html>

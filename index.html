<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI æ·±åº¦è¯„ä¼°ç³»ç»Ÿ</title>
    <script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/marked/4.0.2/marked.min.js"></script>
    <style>
        :root { --primary: #007aff; --text: #1d1d1f; --bg-red: #d12d6c; }
        
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body { 
            margin: 0; padding: 0; 
            background: var(--bg-red); /* ä»…ä½œä¸ºé¡¶éƒ¨çš„æçª„éœ²è¾¹ */
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            display: flex; justify-content: center; align-items: flex-end; /* å¡ç‰‡ä»åº•éƒ¨å‘ä¸Šé¡¶ */
            min-height: 100vh;
            overflow: hidden;
        }

        /* çº¯ç™½ä¸»å¡ç‰‡ï¼šå æ® 98% çš„é¢ç§¯ï¼Œå½»åº•è¦†ç›–èƒŒæ™¯ */
        .main-card { 
            width: 100%; 
            height: 98vh; /* å æ®å±å¹• 98% çš„é«˜åº¦ */
            max-width: 600px;
            background: #ffffff; 
            border-radius: 24px 24px 0 0; /* ä»…é¡¶éƒ¨åœ†è§’ */
            padding: 40px 24px;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.1);
            display: flex; 
            flex-direction: column;
            position: relative;
            overflow-y: auto;
        }

        .header { 
            font-size: 1.5rem; font-weight: 700; color: var(--text);
            margin-bottom: 25px; text-align: left;
            letter-spacing: -0.5px;
        }

        /* æ¿€æ´»ç è¾“å…¥ï¼šæç®€è®¾è®¡ */
        .auth-container {
            background: #f2f2f7; border-radius: 14px;
            padding: 14px; margin-bottom: 35px;
        }
        .auth-container input {
            width: 100%; border: none; background: transparent;
            font-size: 1rem; font-weight: 600; text-align: center;
            color: var(--primary); outline: none; letter-spacing: 2px;
        }
        .auth-tip { font-size: 0.7rem; color: #86868b; text-align: center; margin-top: 6px; }

        .section-tag { 
            font-size: 0.75rem; font-weight: 700; color: #86868b;
            margin-bottom: 10px; opacity: 0.8;
        }

        .question-text { 
            font-size: 1.3rem; font-weight: 600; color: var(--text);
            line-height: 1.4; margin-bottom: 30px;
        }

        /* é€‰é¡¹åˆ—è¡¨ */
        .opt-group { display: flex; flex-direction: column; gap: 12px; margin-bottom: 40px; }
        .opt-btn {
            background: #ffffff; border: 1px solid #d2d2d7;
            padding: 20px; border-radius: 14px; font-size: 1rem;
            font-weight: 500; color: var(--text); cursor: pointer;
            transition: all 0.2s cubic-bezier(0.25, 0.1, 0.25, 1);
            text-align: left;
        }
        .opt-btn:active { 
            background: #f5f5f7; border-color: var(--primary); 
            transform: scale(0.98); 
        }

        /* è¿›åº¦æ¡ï¼šæ›´çº¤ç»† */
        .prog-bg { width: 100%; height: 3px; background: #eee; border-radius: 2px; margin-bottom: 30px; }
        .prog-fill { height: 100%; background: var(--primary); border-radius: 2px; transition: width 0.4s ease; }

        .submit-area { margin-top: auto; padding-bottom: 20px; }
        .black-btn {
            width: 100%; background: #000000; color: white;
            border: none; padding: 20px; border-radius: 14px;
            font-size: 1.05rem; font-weight: 600; cursor: pointer;
            transition: opacity 0.2s;
        }
        .black-btn:active { opacity: 0.8; }

        #result-view { 
            display: none; position: fixed; inset: 0; 
            background: white; z-index: 2000; padding: 40px 24px; 
            overflow-y: auto;
        }
        .loading-hint { display: none; text-align: center; font-size: 0.9rem; color: #86868b; margin-top: 20px; }
    </style>
</head>
<body>

<div class="main-card" id="app">
    <div class="header">ä½“æ€æ·±åº¦è¯„ä¼°</div>

    <div class="auth-container">
        <input type="text" id="activationCode" placeholder="è¾“å…¥ 15 ä½æ¿€æ´»ç ">
        <div class="auth-tip">éªŒè¯ 543-618 åè®®åå¼€å¯ç”Ÿæˆ</div>
    </div>

    <div class="prog-bg"><div class="prog-fill" id="prog-fill" style="width: 5%;"></div></div>

    <div id="quiz-step-view">
        <div class="section-tag" id="step-counter">QUESTION 1 / 20</div>
        <div class="question-text" id="q-display">æ­£åœ¨å‡†å¤‡è¯„ä¼°...</div>
        <div class="opt-group" id="opts-box"></div>
    </div>

    <div id="status-step-view" style="display:none;">
        <div class="section-tag">FINAL STEP</div>
        <div class="question-text">è¡¥å……æ‚¨çš„èº«ä½“æ„Ÿå—</div>
        <textarea id="extra-notes" style="width:100%; border:1px solid #d2d2d7; border-radius:14px; height:150px; padding:15px; font-size:1rem; outline: none;" placeholder="ä¾‹ï¼šè„–å­ç»å¸¸åƒµç¡¬ã€å³ä¾§è‚©è†€é«˜..."></textarea>
    </div>

    <div class="submit-area">
        <button class="black-btn" id="gen-btn" onclick="processVerify()" style="display:none;">ç”Ÿæˆè¯„ä¼°æŠ¥å‘Š</button>
        <div id="loader" class="loading-hint">ğŸš€ AI æ­£åœ¨æ„å»ºçº æ­£æ–¹æ¡ˆ...</div>
    </div>
</div>

<div id="result-view">
    <div id="report-content" style="line-height: 1.8;"></div>
    <button onclick="location.reload()" style="width:100%; padding:18px; border:1px solid #d2d2d7; background:white; border-radius:14px; font-weight:600; margin-top:40px; color:#1d1d1f;">å®Œæˆå¹¶é€€å‡º</button>
</div>

<script>
    const DEEPSEEK_KEY = "sk-d37975a862d84a7580adf1759cee3a1a"; // ğŸš¨ å¡«å…¥ sk- å¼€å¤´çš„ Key

    const questions = [
        { q: "æ‚¨çš„æ€§åˆ«ï¼Ÿ", opts: ["å¥³ç”Ÿ", "ç”·ç”Ÿ"] },
        { q: "ä¾§èº«çœ‹ï¼Œè€³å‚æ˜¯å¦æ˜æ˜¾åœ¨è‚©è†€å‰æ–¹ï¼Ÿ", opts: ["å¤´å‰ä¼¸ï¼ˆæ‰‹æœºé¢ˆï¼‰", "åŸºæœ¬å‚ç›´", "ä¸ç¡®å®š"] },
        { q: "è‡ªç„¶ç«™ç«‹ï¼Œæ‰‹æŒå¿ƒçš„æœå‘ï¼Ÿ", opts: ["å‘åï¼ˆåœ†è‚©ï¼‰", "å‘å¤§è…¿ï¼ˆæ­£å¸¸ï¼‰", "ç•¥åå"] },
        { q: "è§‚å¯Ÿæ‚¨çš„é”éª¨å½¢çŠ¶ï¼Ÿ", opts: ["æ˜æ˜¾çš„ V å‹", "å¹³ç›´çš„ä¸€å­—å‹", "çœ‹ä¸æ¸…/ä¸æ˜æ˜¾"] },
        { q: "åŒè‚©æ˜¯å¦æœ‰æ˜æ˜¾çš„é«˜ä½ä¸ä¸€ï¼Ÿ", opts: ["å·¦è‚©é«˜", "å³è‚©é«˜", "åŸºæœ¬å¹³è¡¡"] },
        { q: "é å¢™ç«™ç«‹ï¼Œåè„‘å‹ºèƒ½å¦è´´å¢™ï¼Ÿ", opts: ["è´´ä¸åˆ°", "è½»æ¾è´´åˆ°", "è´´åˆ°ä½†åƒåŠ›"] },
        { q: "è…°ä¸å¢™é¢ä¹‹é—´çš„é—´éš™ï¼Ÿ", opts: ["ä¸€ä¸ªæ‹³å¤´å®½", "ä¸€ä¸ªæ‰‹æŒå®½", "å‡ ä¹æ²¡ç¼éš™"] },
        { q: "æ˜¯å¦æœ‰â€œå››è‚¢ä¸èƒ–ä½†å°è…¹å‡¸å‡ºâ€ï¼Ÿ", opts: ["éå¸¸æ˜æ˜¾", "è½»å¾®", "å®Œå…¨æ²¡æœ‰"] },
        { q: "è£¤å¤´æ˜¯å¦ç»å¸¸ä¸€è¾¹é«˜ä¸€è¾¹ä½ï¼Ÿ", opts: ["æ˜¯", "å¦", "æ²¡æ³¨æ„è¿‡"] },
        { q: "å¹¶è„šä¸‹è¹²ï¼Œè„šåè·Ÿèƒ½è¸©æ­»åœ°é¢å—ï¼Ÿ", opts: ["ä¸èƒ½ï¼ˆå¾€åå€’ï¼‰", "è½»æ¾è¸©æ­»", "æ¯”è¾ƒå‹‰å¼º"] },
        { q: "å¸¸ç©¿çš„é‹åº•ï¼Œç£¨æŸä½ç½®åœ¨ï¼Ÿ", opts: ["å¤–ä¾§ç£¨æŸå¤š", "å†…ä¾§ç£¨æŸå¤š", "ç£¨æŸå‡åŒ€"] },
        { q: "ä¹…ååï¼Œèº«ä½“å“ªéƒ¨åˆ†æœ€å…ˆç–²åŠ³ï¼Ÿ", opts: ["é¢ˆéƒ¨/æ–œæ–¹è‚Œ", "ä¸‹è…°éƒ¨", "è‡€è…¿éƒ¨"] },
        { q: "æ˜¯å¦æœ‰ç¿˜äºŒéƒè…¿çš„ä¹ æƒ¯ï¼Ÿ", opts: ["ç»å¸¸ç¿˜", "å¶å°”ç¿˜", "ä»ä¸ç¿˜"] },
        { q: "åŒæ‰‹å‘åå‹¾ï¼ŒæŒ‡å°–èƒ½å¦ç›¸æ‰£ï¼Ÿ", opts: ["å·®å¾ˆè¿œ", "å‹‰å¼ºç¢°åˆ°", "è½»æ¾ç›¸æ‰£"] },
        { q: "æ·±å‘¼å¸æ—¶ï¼Œè§‚å¯Ÿèº«ä½“èµ·ä¼ï¼Ÿ", opts: ["èƒ¸å£åŠ¨", "è‚šå­åŠ¨", "éƒ½æœ‰"] },
        { q: "å•è„šç«™ç«‹é—­çœ¼ï¼Œèƒ½åšæŒ10ç§’å—ï¼Ÿ", opts: ["å¾ˆéš¾", "å‹‰å¼º", "å¾ˆç¨³"] },
        { q: "è‚©èƒ›éª¨æ˜¯å¦åƒç¿…è†€èˆ¬å‡¸èµ·ï¼Ÿ", opts: ["æ˜¯", "å¦", "è½»å¾®"] },
        { q: "è½¬åŠ¨è„–å­æ˜¯å¦æœ‰å“å£°ï¼Ÿ", opts: ["ç»å¸¸å“", "ä»ä¸", "å¶å°”"] },
        { q: "æ¯å¤©çœ‹æ‰‹æœºçš„æ—¶é•¿ï¼Ÿ", opts: ["8å°æ—¶ä»¥ä¸Š", "4-8å°æ—¶", "4å°æ—¶ä»¥å†…"] },
        { q: "ç»ƒä¹ ç¯å¢ƒï¼Ÿ", opts: ["å±…å®¶ï¼ˆé›¶å™¨æ¢°ï¼‰", "å¥èº«æˆ¿"] }
    ];

    let currentIdx = 0;
    let answers = [];

    function updateView() {
        const q = questions[currentIdx];
        document.getElementById('step-counter').innerText = `QUESTION ${currentIdx + 1} / 20`;
        document.getElementById('q-display').innerText = q.q;
        document.getElementById('prog-fill').style.width = ((currentIdx + 1) / 20) * 100 + '%';
        
        const box = document.getElementById('opts-box');
        box.innerHTML = '';
        q.opts.forEach(o => {
            const btn = document.createElement('div');
            btn.className = 'opt-btn'; btn.innerText = o;
            btn.onclick = () => {
                answers.push(o);
                if(currentIdx < 19) {
                    currentIdx++; updateView();
                } else {
                    document.getElementById('quiz-step-view').style.display = 'none';
                    document.getElementById('status-step-view').style.display = 'block';
                    document.getElementById('gen-btn').style.display = 'block';
                }
            };
            box.appendChild(btn);
        });
    }

    async function processVerify() {
        const code = document.getElementById('activationCode').value;
        const pts = code.split('-');
        if(pts.length !== 2) return alert("æ¿€æ´»ç æ ¼å¼é”™è¯¯ (ä¾‹: XXXXX-XXXXXX)");

        const s1 = pts[0].split('').reduce((a,b)=>a+b.charCodeAt(0),0);
        const s2 = pts[1].split('').reduce((a,b)=>a+b.charCodeAt(0),0);

        if(s1 !== 543 || s2 !== 618) return alert("æ¿€æ´»ç æ ¡éªŒä¸é€šè¿‡ï¼");

        document.getElementById('loader').style.display = 'block';
        const extra = document.getElementById('extra-notes').value;

        try {
            const res = await fetch("https://api.deepseek.com/chat/completions", {
                method: "POST",
                headers: { "Content-Type": "application/json", "Authorization": `Bearer ${DEEPSEEK_KEY}` },
                body: JSON.stringify({
                    model: "deepseek-chat",
                    messages: [
                        {role: "system", content: "ä½ æ˜¯ä¸€ä½ä¸“ä¸šç§æ•™ã€‚ç”¨Markdownæä¾›30å¤©çº æ­£æŠ¥å‘Šã€‚"},
                        {role: "user", content: `æ•°æ®ï¼š${answers.join('; ')}ã€‚è¡¥å……ï¼š${extra}`}
                    ]
                })
            });
            const data = await res.json();
            document.getElementById('report-content').innerHTML = marked.parse(data.choices[0].message.content);
            document.getElementById('result-view').style.display = 'block';
        } catch(e) {
            alert("ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•");
            document.getElementById('loader').style.display = 'none';
        }
    }
    window.onload = updateView;
</script>
</body>
</html>

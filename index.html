<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI æ™ºèƒ½ä½“æ€åˆ†æç³»ç»Ÿ</title>
    <script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/marked/4.0.2/marked.min.js"></script>
    <style>
        :root { --primary: #007aff; --text: #1d1d1f; --bg-red: #d12d6c; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body { 
            margin: 0; padding: 0; background: var(--bg-red); 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            display: flex; justify-content: center; align-items: flex-end; 
            min-height: 100vh; overflow: hidden;
        }

        /* çº¯ç™½ä¸»å¡ç‰‡ï¼šå  98% é«˜åº¦ */
        .main-card { 
            width: 100%; height: 98vh; max-width: 600px;
            background: #ffffff; border-radius: 28px 28px 0 0;
            padding: 45px 24px; box-shadow: 0 -10px 40px rgba(0,0,0,0.1);
            display: flex; flex-direction: column; position: relative; overflow-y: auto;
        }

        .header { font-size: 1.6rem; font-weight: 700; color: var(--text); margin-bottom: 25px; letter-spacing: -0.5px; }

        /* æç®€è¿›åº¦æ¡ */
        .prog-bg { width: 100%; height: 2px; background: #eee; border-radius: 1px; margin-bottom: 35px; }
        .prog-fill { height: 100%; background: var(--primary); transition: width 0.4s ease; }

        .section-tag { font-size: 0.7rem; font-weight: 700; color: #86868b; margin-bottom: 12px; text-transform: uppercase; letter-spacing: 1px; }
        .question-text { font-size: 1.4rem; font-weight: 600; color: var(--text); line-height: 1.4; margin-bottom: 35px; }

        /* é€‰é¡¹è®¾è®¡ */
        .opt-group { display: flex; flex-direction: column; gap: 14px; }
        .opt-btn {
            background: #fff; border: 1px solid #e5e5e7; padding: 22px; border-radius: 18px;
            font-size: 1.05rem; font-weight: 500; color: var(--text); cursor: pointer;
            transition: all 0.2s ease;
        }
        .opt-btn:active { background: #f5f5f7; border-color: var(--primary); transform: scale(0.98); }

        /* ç‹¬ç«‹æ¿€æ´»é¡µä¸“å± UI */
        .auth-content { text-align: center; padding-top: 40px; }
        .auth-icon { font-size: 50px; margin-bottom: 25px; display: block; }
        .auth-input-container { margin: 40px 0; position: relative; }
        .auth-input-container input {
            width: 100%; border: none; background: #f5f5f7; padding: 22px; border-radius: 18px;
            font-size: 1.4rem; font-weight: 700; text-align: center; color: var(--text);
            outline: none; letter-spacing: 3px; border: 1px solid transparent;
        }
        .auth-input-container input:focus { border-color: var(--primary); background: #fff; }

        .bottom-bar { margin-top: auto; padding-bottom: 40px; }
        .black-btn {
            width: 100%; background: #000; color: #fff; border: none; padding: 22px;
            border-radius: 18px; font-size: 1.1rem; font-weight: 600; cursor: pointer;
        }

        #result-view { 
            display: none; position: fixed; inset: 0; background: white; z-index: 2000; 
            padding: 45px 24px; overflow-y: auto;
        }
        .loader { display: none; text-align: center; color: #86868b; margin-top: 25px; font-size: 0.95rem; }

        textarea {
            width: 100%; border: 1px solid #e5e5e7; border-radius: 18px; height: 220px; 
            padding: 20px; font-size: 1.1rem; outline: none; font-family: inherit; background: #f9f9fb;
        }
    </style>
</head>
<body>

<div class="main-card" id="app">
    <div id="nav-wrapper">
        <div class="header">ä½“æ€è¯„ä¼°æ–¹æ¡ˆ</div>
        <div class="prog-bg"><div class="prog-fill" id="prog-fill" style="width: 5%;"></div></div>
    </div>

    <div id="step-quiz">
        <div class="section-tag" id="step-counter">åˆ†æè¿›åº¦ 1 / 20</div>
        <div class="question-text" id="q-display">æ­£åœ¨åŠ è½½...</div>
        <div class="opt-group" id="opts-box"></div>
    </div>

    <div id="step-status" style="display:none;">
        <div class="section-tag">èº«ä½“æ„ŸçŸ¥</div>
        <div class="question-text">æ‚¨ç›®å‰æœ‰å“ªäº›æ˜æ˜¾çš„èº«ä½“ä¸é€‚æˆ–çº æ­£è¯‰æ±‚ï¼Ÿ</div>
        <textarea id="extra-notes" placeholder="ä¾‹å¦‚ï¼šé•¿æœŸä¼æ¡ˆé¢ˆæ¤åƒµç¡¬ã€ç”±äºä¹ æƒ¯æ€§ä¾§ç¡å¯¼è‡´çš„é«˜ä½è‚©æ˜æ˜¾ã€æˆ–è€…æ·±è¹²æ—¶è†ç›–æœ‰å¼‚å“..."></textarea>
        <div class="bottom-bar">
            <button class="black-btn" onclick="toAuth()">ä¸‹ä¸€æ­¥</button>
        </div>
    </div>

    <div id="step-auth" style="display:none;">
        <div class="auth-content">
            <span class="auth-icon">ğŸ›¡ï¸</span>
            <div class="question-text">æŠ¥å‘Šå·²å‡†å¤‡å°±ç»ª</div>
            <p style="color:#86868b; margin-top:-20px; font-size:1rem;">è¯·è¾“å…¥æˆæƒç ä»¥è§£é”æ‚¨çš„ AI çº æ­£è®¡åˆ’</p>
            
            <div class="auth-input-container">
                <input type="text" id="activationCode" placeholder="è¯·è¾“å…¥æˆæƒç " spellcheck="false">
            </div>
        </div>

        <div class="bottom-bar">
            <button class="black-btn" onclick="validate()">è§£é”æŠ¥å‘Š</button>
            <div id="loading-ui" class="loader">æ­£åœ¨è°ƒå–äº‘ç«¯åˆ†ææ•°æ®...</div>
        </div>
    </div>
</div>

<div id="result-view">
    <div id="report-content"></div>
    <button onclick="location.reload()" style="width:100%; padding:20px; border:1px solid #eee; background:#fff; border-radius:18px; font-weight:600; margin-top:40px;">é‡æ–°è¯„ä¼°</button>
</div>

<script>
    const DEEP_KEY = "ä½ çš„_DEEPSEEK_API_KEY"; // ğŸš¨ å¡«å…¥ sk- å¯†é’¥

    const questions = [
        { q: "æ‚¨çš„ä¸»è¦æ€§åˆ«ï¼Ÿ", opts: ["å¥³ç”Ÿ", "ç”·ç”Ÿ"] },
        { q: "ä¾§èº«çœ‹ï¼Œè€³å‚æ˜¯å¦æ˜æ˜¾åœ¨è‚©è†€å‰æ–¹ï¼Ÿ", opts: ["æ˜¯ï¼ˆå¤´å‰ä¼¸ï¼‰", "å¦ï¼ˆåŸºæœ¬å‚ç›´ï¼‰", "ä¸ç¡®å®š"] },
        { q: "è‡ªç„¶ç«™ç«‹æ—¶ï¼Œæ‰‹æŒå¿ƒçš„æœå‘ï¼Ÿ", opts: ["å‘åï¼ˆåœ†è‚©ï¼‰", "å‘å¤§è…¿ï¼ˆæ­£å¸¸ï¼‰", "ç•¥åå"] },
        { q: "è§‚å¯Ÿæ‚¨çš„é”éª¨å½¢çŠ¶ï¼Ÿ", opts: ["æ˜æ˜¾çš„ V å‹", "å¹³ç›´ä¸€å­—å‹", "çœ‹ä¸æ¸…/ä¸æ˜æ˜¾"] },
        { q: "åŒè‚©æ˜¯å¦æœ‰æ˜æ˜¾çš„é«˜ä½ä¸ä¸€ï¼Ÿ", opts: ["å·¦é«˜å³ä½", "å³é«˜å·¦ä½", "åŸºæœ¬å¹³è¡¡"] },
        { q: "é å¢™ç«™ç«‹ï¼Œåè„‘å‹ºèƒ½å¦è‡ªç„¶è´´å¢™ï¼Ÿ", opts: ["è´´ä¸åˆ°", "è½»æ¾è´´åˆ°", "è´´åˆ°ä½†åƒåŠ›"] },
        { q: "è…°ä¸å¢™é¢ä¹‹é—´çš„é—´éš™ï¼Ÿ", opts: ["ä¸€ä¸ªæ‹³å¤´å®½", "ä¸€ä¸ªæ‰‹æŒå®½", "å‡ ä¹æ— ç¼éš™"] },
        { q: "æ˜¯å¦æœ‰â€œå››è‚¢ä¸èƒ–ä½†å°è…¹å‡¸å‡ºâ€ï¼Ÿ", opts: ["éå¸¸æ˜æ˜¾", "è½»å¾®", "å®Œå…¨æ²¡æœ‰"] },
        { q: "è§‚å¯Ÿé‹åº•ï¼Œç£¨æŸä½ç½®åœ¨ï¼Ÿ", opts: ["å¤–ä¾§ç£¨æŸå¤š", "å†…ä¾§ç£¨æŸå¤š", "ç£¨æŸå‡åŒ€"] },
        { q: "ä¹…ååï¼Œèº«ä½“å“ªéƒ¨åˆ†æœ€å…ˆç–²åŠ³ï¼Ÿ", opts: ["é¢ˆéƒ¨/æ–œæ–¹è‚Œ", "ä¸‹è…°éƒ¨", "è‡€è…¿éƒ¨"] },
        { q: "æ˜¯å¦æœ‰ç¿˜äºŒéƒè…¿çš„ä¹ æƒ¯ï¼Ÿ", opts: ["ç»å¸¸ç¿˜", "å¶å°”ç¿˜", "ä¸ç¿˜"] },
        { q: "åŒæ‰‹å‘åå‹¾ï¼ŒæŒ‡å°–èƒ½å¦ç›¸æ‰£ï¼Ÿ", opts: ["å·®å¾ˆè¿œ", "å‹‰å¼ºç¢°åˆ°", "è½»æ¾ç›¸æ‰£"] },
        { q: "æ·±å‘¼å¸æ—¶ï¼Œè§‚å¯Ÿèº«ä½“èµ·ä¼ï¼Ÿ", opts: ["èƒ¸å£åŠ¨", "è‚šå­åŠ¨", "éƒ½æœ‰"] },
        { q: "å•è„šç«™ç«‹é—­çœ¼ï¼Œèƒ½åšæŒ10ç§’å—ï¼Ÿ", opts: ["å¾ˆéš¾", "å‹‰å¼º", "å¾ˆç¨³"] },
        { q: "è‚©èƒ›éª¨æ˜¯å¦åƒç¿…è†€èˆ¬å‡¸èµ·ï¼Ÿ", opts: ["æ˜æ˜¾å‡¸èµ·", "å¹³æ•´è´´åˆ", "ç•¥å¾®å‡¸èµ·"] },
        { q: "è½¬åŠ¨è„–å­æ˜¯å¦æœ‰å“å£°ï¼Ÿ", opts: ["ç»å¸¸å“", "ä»ä¸", "å¶å°”"] },
        { q: "æ¯å¤©å¤„ç†ç”µå­äº§å“æ—¶é•¿ï¼Ÿ", opts: ["8å°æ—¶ä»¥ä¸Š", "4-8å°æ—¶", "4å°æ—¶ä»¥å†…"] },
        { q: "æ‚¨çš„è®­ç»ƒåŸºç¡€ï¼Ÿ", opts: ["é›¶åŸºç¡€å°ç™½", "æœ‰å¥èº«ä¹ æƒ¯", "ä¸“ä¸šè¿åŠ¨å‘˜"] },
        { q: "è¿‘æœŸæ˜¯å¦æœ‰å—è¿‡ä¼¤ï¼Ÿ", opts: ["æ˜¯ï¼ˆæœ‰æ—§ç–¾ï¼‰", "å¦ï¼ˆä¸€åˆ‡æ­£å¸¸ï¼‰"] },
        { q: "æ‚¨å¸Œæœ›é€šè¿‡æŠ¥å‘Šå¾—åˆ°ï¼Ÿ", opts: ["çº æ­£æ–¹æ¡ˆ", "é£é™©è¯„ä¼°", "é¥®é£Ÿå»ºè®®"] }
    ];

    let currentIdx = 0;
    let answers = [];

    function render() {
        const q = questions[currentIdx];
        document.getElementById('step-counter').innerText = `åˆ†æè¿›åº¦ ${currentIdx + 1} / 20`;
        document.getElementById('q-display').innerText = q.q;
        document.getElementById('prog-fill').style.width = ((currentIdx + 1) / 20) * 100 + '%';
        const box = document.getElementById('opts-box');
        box.innerHTML = '';
        q.opts.forEach(o => {
            const btn = document.createElement('div');
            btn.className = 'opt-btn'; btn.innerText = o;
            btn.onclick = () => {
                answers.push(o);
                if(currentIdx < 19) { currentIdx++; render(); }
                else {
                    document.getElementById('step-quiz').style.display = 'none';
                    document.getElementById('step-status').style.display = 'block';
                }
            };
            box.appendChild(btn);
        });
    }

    function toAuth() {
        document.getElementById('nav-wrapper').style.display = 'none';
        document.getElementById('step-status').style.display = 'none';
        document.getElementById('step-auth').style.display = 'block';
    }

    async function validate() {
        const code = document.getElementById('activationCode').value;
        const pts = code.split('-');
        if(pts.length !== 2) return alert("æˆæƒç é”™è¯¯");

        // éšè—çš„é€»è¾‘æ ¡éªŒ
        const s1 = pts[0].split('').reduce((a,b)=>a+b.charCodeAt(0),0);
        const s2 = pts[1].split('').reduce((a,b)=>a+b.charCodeAt(0),0);

        if(s1 !== 543 || s2 !== 618) return alert("æˆæƒç éªŒè¯æœªé€šè¿‡");

        document.getElementById('loading-ui').style.display = 'block';
        const extra = document.getElementById('extra-notes').value;

        try {
            const res = await fetch("https://api.deepseek.com/chat/completions", {
                method: "POST",
                headers: { "Content-Type": "application/json", "Authorization": `Bearer ${DEEP_KEY}` },
                body: JSON.stringify({
                    model: "deepseek-chat",
                    messages: [
                        {role: "system", content: "ä½ æ˜¯ä¸€ä½ä¸“ä¸šç‰©ç†æ²»ç–—å¸ˆã€‚è¯·æ ¹æ®æ•°æ®æä¾›Markdownæ ¼å¼çš„è¯„ä¼°æ–¹æ¡ˆã€‚"},
                        {role: "user", content: `æ•°æ®ï¼š${answers.join(',')}ã€‚è¯¦æƒ…ï¼š${extra}`}
                    ]
                })
            });
            const data = await res.json();
            document.getElementById('report-content').innerHTML = marked.parse(data.choices[0].message.content);
            document.getElementById('result-view').style.display = 'block';
        } catch(e) {
            alert("è§£é”å¤±è´¥ï¼Œè¯·é‡è¯•");
            document.getElementById('loading-ui').style.display = 'none';
        }
    }
    window.onload = render;
</script>
</body>
</html>

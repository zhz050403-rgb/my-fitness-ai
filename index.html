<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Coach Pro | ç§äººæ·±åº¦å®šåˆ¶æ•™ç»ƒ</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        :root { --accent: #6366f1; --glass: rgba(255, 255, 255, 0.7); }
        
        /* åŠ¨æ€æ¸å˜èƒŒæ™¯ */
        body { 
            margin: 0; padding: 20px; min-height: 100vh;
            display: flex; justify-content: center; align-items: center;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* æ¯›ç»ç’ƒå®¹å™¨ */
        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 30px;
            padding: 30px;
            width: 100%;
            max-width: 450px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
            box-sizing: border-box;
        }

        h1 { text-align: center; color: #1f2937; font-size: 1.5rem; margin-bottom: 25px; letter-spacing: -0.5px; }

        .auth-section {
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.2);
            padding: 20px; border-radius: 20px; margin-bottom: 25px; text-align: center;
        }
        .auth-section label { display: block; font-size: 0.8rem; font-weight: bold; color: #4f46e5; margin-bottom: 10px; }
        .auth-section input {
            width: 100%; background: white; border: 2px solid #e0e7ff; padding: 12px;
            border-radius: 12px; font-size: 1.2rem; font-weight: bold; text-align: center;
            letter-spacing: 3px; color: #4f46e5; box-sizing: border-box; outline: none;
        }

        .input-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
        .input-group { display: flex; flex-direction: column; }
        .input-group label { font-size: 0.75rem; font-weight: 600; color: #6b7280; margin-bottom: 5px; margin-left: 5px; }
        
        input[type="number"], select, textarea {
            padding: 12px; border: 1px solid rgba(0,0,0,0.1); border-radius: 12px;
            background: rgba(255,255,255,0.5); font-size: 14px; outline: none;
        }

        textarea { height: 60px; resize: none; }

        button {
            width: 100%; padding: 16px; border: none; border-radius: 15px;
            background: #1f2937; color: white; font-size: 1rem; font-weight: bold;
            cursor: pointer; transition: all 0.3s ease; margin-top: 10px;
        }
        button:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); background: #000; }

        #output { margin-top: 30px; line-height: 1.7; color: #374151; font-size: 15px; }
        .loading { text-align: center; color: #6366f1; font-weight: bold; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
    </style>
</head>
<body>

<div class="glass-card">
    <h1>ğŸ¯ AI Coach Pro</h1>

    <div class="auth-section">
        <label>è¯·è¾“å…¥ 10 ä½æˆæƒæ¿€æ´»ç </label>
        <input type="text" id="authCode" maxlength="10" placeholder="è§£é”è®¡åˆ’">
    </div>

    <div class="input-grid">
        <div class="input-group"><label>æ€§åˆ«</label><select id="gender"><option>å¥³</option><option>ç”·</option></select></div>
        <div class="input-group"><label>å¹´é¾„</label><input type="number" id="age" value="25"></div>
        <div class="input-group"><label>èº«é«˜(cm)</label><input type="number" id="h" value="160"></div>
        <div class="input-group"><label>ä½“é‡(kg)</label><input type="number" id="w" value="50"></div>
    </div>

    <div class="input-group" style="margin-bottom:15px;"><label>èº«ä½“çŠ¶æ€</label><textarea id="status" placeholder="å¦‚ï¼šè…°é…¸ã€è†ç›–å“ã€ç”Ÿç†æœŸä¸è§„å¾‹..."></textarea></div>
    <div class="input-group" style="margin-bottom:15px;"><label>è¿åŠ¨ä¹ æƒ¯</label><textarea id="habit" placeholder="å¦‚ï¼šå°ç™½æ²¡ç»ƒè¿‡ã€å–œæ¬¢æœ‰æ°§æ“..."></textarea></div>
    
    <div class="input-group">
        <label>æ‚¨çš„èº«æç›®æ ‡</label>
        <select id="dream">
            <option>é©¬ç”²çº¿å¡‘å½¢ (Sæ›²çº¿)</option>
            <option>æç®€ç›´è§’è‚© (ä½“æ€æ”¹å–„)</option>
            <option>èœœæ¡ƒè‡€åŠ›é‡ (å¢è‚Œå¡‘å½¢)</option>
            <option>å…¨èº«æ•ˆå‡è„‚ (å¥åº·è½»ç›ˆ)</option>
        </select>
    </div>

    <button onclick="handleExecute()">ç”Ÿæˆä¸“å±æ·±åº¦è®¡åˆ’</button>

    <div id="output"></div>
</div>

<script>
    async function handleExecute() {
        const code = document.getElementById('authCode').value.trim().toUpperCase();
        const out = document.getElementById('output');

        // --- ğŸ” å•†ä¸šçº§æ ¡éªŒç®—æ³• ---
        // è§„åˆ™ï¼š1.å¿…é¡»10ä½ 2.å«K 3.ç¬¬4ä½ASCIIå‡å»ç¬¬8ä½ASCIIå¿…é¡»ç­‰äº3
        function checkCode(s) {
            if(s.length !== 10 || !s.includes("K")) return false;
            return (s.charCodeAt(3) - s.charCodeAt(7)) === 3;
        }

        if(!checkCode(code)) {
            alert("âŒ æˆæƒç æ— æ•ˆæˆ–æ ¼å¼é”™è¯¯ï¼è¯·è”ç³»å°çº¢ä¹¦å–å®¶ã€‚");
            return;
        }

        out.innerHTML = "<p class='loading'>ğŸ’ æˆæƒæˆåŠŸï¼æ•™ç»ƒæ­£åœ¨è®¡ç®—æœ€ä½³æ–¹æ¡ˆ...</p>";

        const info = {
            g: document.getElementById('gender').value,
            a: document.getElementById('age').value,
            h: document.getElementById('h').value,
            w: document.getElementById('w').value,
            s: document.getElementById('status').value || "å¥åº·",
            hb: document.getElementById('habit').value || "æ— ",
            d: document.getElementById('dream').value
        };

        // âš ï¸ è¯·åœ¨æ­¤å¤„å¡«å…¥ä½ çš„ API KEY
        const KEY = "ä½ çš„API_KEY";
        const URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${KEY}`;

        const prompt = `ä½ æ˜¯ä¸€ä½ç§æ•™ã€‚å¸®æˆ‘åˆ¶å®šå¥èº«è®¡åˆ’ã€‚èº«é«˜${info.h}, ä½“é‡${info.w}, æ€§åˆ«${info.g}ã€‚çŠ¶æ€:${info.s}ã€‚ä¹ æƒ¯:${info.hb}ã€‚ç›®æ ‡:${info.d}ã€‚è¯·ç”¨Markdownæ ¼å¼ï¼ŒåŒ…å«é¥®é£Ÿå»ºè®®å’Œä¸€å‘¨è¯¾è¡¨ã€‚`;

        try {
            const resp = await fetch(URL, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
            });
            const data = await resp.json();
            out.innerHTML = marked.parse(data.candidates[0].content.parts[0].text);
        } catch (e) {
            out.innerHTML = "<p style='color:red'>âŒ ç½‘ç»œè¿æ¥è¶…æ—¶ã€‚è¯·ç¡®ä¿ä½ çš„ç½‘ç»œå·¥å…·å·²å¼€å¯å…¨å±€æ¨¡å¼ã€‚</p>";
        }
    }
</script>
</body>
</html>

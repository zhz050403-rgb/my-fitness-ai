<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI æ™ºèƒ½ä½“æ€åˆ†æä¸“å®¶ç³»ç»Ÿ</title>
    <script src="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/marked/4.0.2/marked.min.js"></script>
    <style>
        :root { --apple-blue: #007aff; --apple-gray: #f5f5f7; --apple-text: #1d1d1f; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body { margin: 0; padding: 0; background: #d12d6c; font-family: -apple-system, BlinkMacSystemFont, sans-serif; display: flex; justify-content: center; align-items: flex-end; min-height: 100vh; }
        
        .card { width: 100%; height: 97vh; max-width: 600px; background: #fff; border-radius: 24px 24px 0 0; padding: 30px 20px; display: flex; flex-direction: column; box-shadow: 0 -10px 30px rgba(0,0,0,0.2); overflow-y: auto; }
        
        .page { display: none; flex-direction: column; height: 100%; animation: slideUp 0.4s ease-out; }
        .page.active { display: flex; }
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        .title { font-size: 1.7rem; font-weight: 700; color: var(--apple-text); margin-bottom: 8px; }
        .subtitle { font-size: 0.95rem; color: #86868b; margin-bottom: 30px; }

        .input-box { margin-bottom: 18px; }
        .input-box label { display: block; font-size: 0.85rem; font-weight: 600; color: #48484a; margin-bottom: 8px; }
        .input-box input, .input-box select { width: 100%; border: 1.5px solid #e5e5e7; padding: 16px; border-radius: 12px; font-size: 1rem; background: var(--apple-gray); transition: 0.2s; }
        .input-box input:focus { border-color: var(--apple-blue); background: #fff; }

        .q-title { font-size: 1.4rem; font-weight: 700; line-height: 1.3; margin-bottom: 30px; }
        .opt-btn { background: #fff; border: 1.5px solid #e5e5e7; padding: 20px; border-radius: 16px; font-size: 1.05rem; margin-bottom: 12px; cursor: pointer; text-align: left; }
        .opt-btn:active { background: var(--apple-gray); border-color: var(--apple-blue); }

        /* çº¯ç™½ç‹¬ç«‹æ¿€æ´»é¡µ */
        .auth-container { text-align: center; padding-top: 60px; }
        .auth-icon { font-size: 4rem; margin-bottom: 20px; }
        .auth-input { width: 100%; border: none; background: var(--apple-gray); padding: 22px; border-radius: 18px; font-size: 1.6rem; font-weight: 800; text-align: center; letter-spacing: 6px; margin: 40px 0; color: var(--apple-blue); }

        .btn-primary { width: 100%; background: #000; color: #fff; border: none; padding: 20px; border-radius: 16px; font-size: 1.1rem; font-weight: 700; cursor: pointer; margin-top: auto; }
        
        #report-view { display: none; position: fixed; inset: 0; background: #fff; z-index: 100; padding: 30px 20px; overflow-y: auto; }
        .loading-text { display: none; text-align: center; margin-top: 20px; color: #86868b; font-weight: 600; }
    </style>
</head>
<body>

<div class="card">
    <div id="p1" class="page active">
        <div class="title">èº«ææ¡£æ¡ˆé‡‡é›†</div>
        <div class="subtitle">ç”¨äºè®¡ç®— BMI æŒ‡æ•°ä¸åŸºç¡€ä»£è°¢ç‡</div>
        <div class="input-box"><label>æ€§åˆ«</label><select id="sex"><option>å¥³</option><option>ç”·</option></select></div>
        <div class="input-box"><label>å¹´é¾„</label><input type="number" id="age" placeholder="25"></div>
        <div class="input-box"><label>èº«é«˜ (cm)</label><input type="number" id="h" placeholder="170"></div>
        <div class="input-box"><label>ä½“é‡ (kg)</label><input type="number" id="w" placeholder="60"></div>
        <div class="input-box"><label>æœŸå¾…ç›®æ ‡</label><select id="goal"><option>æ”¹å–„åœ†è‚©é©¼èƒŒ</option><option>å‡è„‚å¡‘å½¢</option><option>ç¼“è§£åŠå…¬è…°é…¸</option></select></div>
        <button class="btn-primary" onclick="startQuiz()">å¼€å§‹æ·±åº¦ä½“æ€æµ‹è¯„</button>
    </div>

    <div id="p2" class="page">
        <div class="q-title" id="q-text"></div>
        <div id="q-options" style="display:flex; flex-direction:column;"></div>
    </div>

    <div id="p3" class="page">
        <div class="auth-container">
            <div class="auth-icon">ğŸ›¡ï¸</div>
            <div class="title">ä¸“å®¶æŠ¥å‘Šå·²å°±ç»ª</div>
            <div class="subtitle">æ‚¨çš„ä½“æ€æ•°æ®å­˜åœ¨å¤šé¡¹åå·®ï¼Œè¯·è¾“å…¥æˆæƒç è§£é”</div>
            <input type="text" id="authCode" class="auth-input" placeholder="æˆæƒç " spellcheck="false">
            <p style="color:#86868b; font-size:0.8rem;">æˆæƒç è¯·å’¨è¯¢æ‚¨çš„ä¸“å±é¡¾é—®</p>
        </div>
        <button class="btn-primary" onclick="unlock()">å³åˆ»è§£é”çº æ­£è®¡åˆ’</button>
        <div id="loader" class="loading-text">ğŸ§¬ AI æ­£åœ¨é€šè¿‡è§£å‰–å­¦æ¨¡å‹ç”ŸæˆæŠ¥å‘Š...</div>
    </div>
</div>

<div id="report-view">
    <div id="report-md"></div>
    <button onclick="location.reload()" style="width:100%; padding:15px; background:var(--apple-gray); border:none; border-radius:12px; margin-top:30px; font-weight:700;">é‡æ–°æµ‹è¯„</button>
</div>

<script>
    // ğŸ’¡ å¿…é¡»æ›¿æ¢ï¼šä½¿ç”¨ä¸­è½¬ API æ‰èƒ½è§£å†³æŠ¥é”™
    const API_URL = "https://api.vllm.net/v1/chat/completions"; 
    const API_KEY = "Bearer sk-ä½ çš„ä¸­è½¬KEY"; 

    const questions = [
        { q: "ä¾§èº«è§‚å¯Ÿï¼šè€³å‚æ˜¯å¦åœ¨è‚©è†€å‚ç›´çº¿å‰æ–¹ï¼Ÿ", opts: ["æ˜æ˜¾å‰ä¼¸ï¼ˆæ‰‹æœºé¢ˆï¼‰", "åŸºæœ¬å‚ç›´", "è½»å¾®å‰ç§»"] },
        { q: "è‡ªç„¶ç«™ç«‹ï¼šå¤§æ‹‡æŒ‡çš„æœå‘ï¼Ÿ", opts: ["äº’ç›¸æœå‘ï¼ˆåœ†è‚©æ˜æ˜¾ï¼‰", "æœå‘å‰ï¼ˆæ­£å¸¸ï¼‰", "ç•¥å¾®å†…æ‰£"] },
        { q: "é”éª¨å½¢çŠ¶ï¼Ÿ", opts: ["æ˜¾è‘— V å‹ï¼ˆæ–œæ–¹è‚Œç´§ï¼‰", "ä¸€å­—å¹³ç›´", "çœ‹ä¸æ¸…"] },
        { q: "é«˜ä½è‚©ï¼šåŒè‚©æ˜¯å¦è§†è§‰é«˜åº¦ä¸ä¸€ï¼Ÿ", opts: ["å·¦é«˜å³ä½", "å³é«˜å·¦ä½", "åŸºæœ¬é½å¹³"] },
        { q: "è…°éƒ¨ç©ºéš™ï¼šèƒŒè´´å¢™ç«™ï¼Œè…°åç©ºéš™ï¼Ÿ", opts: ["å¤§äºä¸€æ‹³ï¼ˆå‰å€¾é£é™©ï¼‰", "ä¸€ä¸ªæ‰‹æŒï¼ˆæ­£å¸¸ï¼‰", "å®Œå…¨æ²¡ç¼ï¼ˆåå€¾é£é™©ï¼‰"] },
        { q: "é‹åº•ç£¨æŸï¼šå“ªä¸€ä¾§æœ€ä¸¥é‡ï¼Ÿ", opts: ["å¤–ä¾§", "å†…ä¾§", "å‡åŒ€"] },
        { q: "ä¹…ååï¼šæœ€é…¸ç—›çš„éƒ¨ä½ï¼Ÿ", opts: ["é¢ˆåéƒ¨", "ä¸‹è…°éƒ¨", "è‡€è…¿å‘éº»"] },
        { q: "å¹¶è„šä¸‹è¹²ï¼šè„šåè·Ÿèƒ½è¸©å®å—ï¼Ÿ", opts: ["ä¸èƒ½ï¼ˆå¾€åå€’ï¼‰", "è½»æ¾è¸©å®", "æ¯”è¾ƒå‹‰å¼º"] },
        { q: "éª¨ç›†ï¼šæ˜¯å¦æœ‰å°è…¹å¼‚å¸¸å‡¸å‡ºç°è±¡ï¼Ÿ", opts: ["æ˜¯", "å¦", "è½»å¾®"] },
        { q: "è‚©èƒ›éª¨ï¼šæ˜¯å¦æœ‰çªå‡ºçš„â€œå°ç¿…è†€â€ï¼Ÿ", opts: ["æ˜æ˜¾å‡¸èµ·", "å¹³æ•´è´´åˆ", "ç•¥å¾®å‡¸èµ·"] },
        { q: "ä¹ æƒ¯ï¼šæ˜¯å¦ç»å¸¸ç¿˜äºŒéƒè…¿ï¼Ÿ", opts: ["ç»å¸¸", "ä»ä¸", "å¶å°”"] },
        { q: "å‘¼å¸ï¼šæ·±å‘¼å¸æ—¶è‚©è†€æ˜¯å¦æ˜æ˜¾è€¸èµ·ï¼Ÿ", opts: ["æ˜¯ï¼ˆæµ…å‘¼å¸ï¼‰", "å¦ï¼ˆè…¹å¼å‘¼å¸ï¼‰"] },
        { q: "é¢ˆæ¤ï¼šè½¬åŠ¨è„–å­æ˜¯å¦æœ‰å˜å±å£°ï¼Ÿ", opts: ["ç»å¸¸å“", "ä»ä¸", "å¶å°”å“"] },
        { q: "å¹³è¡¡ï¼šå•è„šé—­çœ¼ç«™èƒ½åšæŒ 10 ç§’å—ï¼Ÿ", opts: ["ä¸èƒ½", "å‹‰å¼º", "å¾ˆç¨³"] },
        { q: "æ ¸å¿ƒï¼šæ˜¯å¦æœ‰è‚‹éª¨å¤–ç¿»ï¼ˆæŒºèƒ¸æ—¶è‚‹éª¨å‡¸å‡ºï¼‰ï¼Ÿ", opts: ["æ˜¯", "å¦", "ä¸ç¡®å®š"] },
        { q: "åŠ¨æ€ï¼šèµ°è·¯æ—¶æ˜¯å¦ç»å¸¸è¸¢åˆ°è„šè¸ï¼Ÿ", opts: ["ç»å¸¸", "ä»ä¸", "å¶å°”"] },
        { q: "æ‰‹è…•ï¼šåŒæ‰‹èƒŒåäº’å‹¾èƒ½å¦æŒ‡å°–ç›¸æ‰£ï¼Ÿ", opts: ["ä¸èƒ½", "è½»æ¾æ‰£ä½", "å‹‰å¼ºç¢°åˆ°"] },
        { q: "å‡èƒ¯å®½ï¼šå¤§è…¿å¤–ä¾§æ˜¯å¦æœ‰å¼‚å¸¸å‡¸èµ·ï¼Ÿ", opts: ["éå¸¸æ˜æ˜¾", "æ²¡æœ‰", "æœ‰ä¸€ç‚¹"] },
        { q: "åŠå…¬ï¼šæ¯å¤©é¢å¯¹ç”µè„‘æ—¶é•¿ï¼Ÿ", opts: ["8hä»¥ä¸Š", "4-8h", "4hä»¥å†…"] },
        { q: "è¿åŠ¨ï¼šç°åœ¨çš„è®­ç»ƒé¢‘ç‡ï¼Ÿ", opts: ["é›¶åŸºç¡€", "å¶å°”ç»ƒ", "ç»å¸¸å¥èº«"] }
    ];

    let current = 0;
    let dataLog = [];

    function startQuiz() {
        const h = document.getElementById('h').value, w = document.getElementById('w').value;
        if(!h || !w) return alert("è¯·è¾“å…¥å®Œæ•´æ•°æ®");
        dataLog.push(`æ¡£æ¡ˆ:æ€§åˆ«${document.getElementById('sex').value},èº«é«˜${h},ä½“é‡${w},å¹´é¾„${document.getElementById('age').value},ç›®æ ‡:${document.getElementById('goal').value}`);
        document.getElementById('p1').classList.remove('active');
        document.getElementById('p2').classList.add('active');
        renderQ();
    }

    function renderQ() {
        const q = questions[current];
        document.getElementById('q-text').innerText = `${current + 1}. ${q.q}`;
        const box = document.getElementById('q-options'); box.innerHTML = '';
        q.opts.forEach(o => {
            const b = document.createElement('div'); b.className = 'opt-btn'; b.innerText = o;
            b.onclick = () => {
                dataLog.push(o);
                if(current < 19) { current++; renderQ(); }
                else { document.getElementById('p2').classList.remove('active'); document.getElementById('p3').classList.add('active'); }
            };
            box.appendChild(b);
        });
    }

    async function unlock() {
        const c = document.getElementById('authCode').value;
        const pts = c.split('-');
        if(pts.length !== 2) return alert("éªŒè¯é”™è¯¯");
        const s1 = pts[0].split('').reduce((a,b)=>a+b.charCodeAt(0),0);
        const s2 = pts[1].split('').reduce((a,b)=>a+b.charCodeAt(0),0);
        if(s1 !== 543 || s2 !== 618) return alert("æˆæƒç æœªé€šè¿‡");

        document.getElementById('loader').style.display = 'block';
        try {
            const res = await fetch(API_URL, {
                method: "POST",
                headers: { "Content-Type": "application/json", "Authorization": API_KEY },
                body: JSON.stringify({
                    model: "deepseek-chat",
                    messages: [
                        {role: "system", content: "ä½ æ˜¯ä¸€ä½ç²¾é€šäººä½“è§£å‰–å­¦çš„ç§æ•™ã€‚æ ¹æ®BMIå’Œä½“æ€æ•°æ®æä¾›Markdownæ ¼å¼æŠ¥å‘Šï¼ŒåŒ…å«è¯Šæ–­ã€30å¤©é’ˆå¯¹æ€§çº æ­£æ–¹æ¡ˆã€‚"},
                        {role: "user", content: dataLog.join(';')}
                    ]
                })
            });
            const d = await res.json();
            document.getElementById('report-md').innerHTML = marked.parse(d.choices[0].message.content);
            document.getElementById('report-view').style.display = 'block';
        } catch(e) { alert("æ¥å£å“åº”å¼‚å¸¸ï¼Œè¯·æ£€æŸ¥é…ç½®ã€‚"); document.getElementById('loader').style.display = 'none'; }
    }
</script>
</body>
</html>

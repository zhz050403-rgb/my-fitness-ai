<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI æ·±åº¦è¯„ä¼°ç³»ç»Ÿ</title>
    <script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/marked/4.0.2/marked.min.js"></script>
    <style>
        :root { --primary: #007aff; --text: #1d1d1f; --bg-red: #d12d6c; }
        
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body { 
            margin: 0; padding: 0; 
            background: var(--bg-red); 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            display: flex; justify-content: center; align-items: flex-start;
            min-height: 100vh;
        }

        /* çº¯ç™½ä¸»å¡ç‰‡ï¼šå æ®ç»å¤§éƒ¨åˆ†é¢ç§¯ */
        .main-card { 
            width: 100%; min-height: 96vh; /* å‡ ä¹å……æ»¡å±å¹•é«˜åº¦ */
            max-width: 500px;
            background: #ffffff; 
            margin-top: 20px;
            border-radius: 32px 32px 0 0; /* é¡¶éƒ¨åœ†è§’ */
            padding: 30px 24px;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.15);
            display: flex; flex-direction: column;
            position: relative;
        }

        .header { 
            font-size: 1.4rem; font-weight: 700; color: var(--text);
            margin-bottom: 25px; text-align: left;
        }

        /* æ¿€æ´»ç è¾“å…¥æ¡†ï¼šæç®€æ·¡è“é£æ ¼ */
        .auth-box {
            background: #f5f7fa; border-radius: 16px;
            padding: 16px; margin-bottom: 30px;
        }
        .auth-box input {
            width: 100%; border: none; background: transparent;
            font-size: 1.1rem; font-weight: 600; text-align: center;
            color: var(--primary); outline: none; letter-spacing: 1px;
        }
        .auth-tip { font-size: 0.75rem; color: #86868b; text-align: center; margin-top: 8px; }

        .section-label { 
            font-size: 0.85rem; font-weight: 600; color: var(--primary);
            text-transform: uppercase; margin-bottom: 8px; letter-spacing: 1px;
        }

        .question-title { 
            font-size: 1.25rem; font-weight: 600; color: var(--text);
            line-height: 1.4; margin-bottom: 25px;
        }

        /* é€‰é¡¹æ ·å¼ */
        .opt-list { display: flex; flex-direction: column; gap: 12px; }
        .opt-item {
            background: #ffffff; border: 1.5px solid #e5e5e7;
            padding: 18px; border-radius: 16px; font-size: 1rem;
            font-weight: 500; color: var(--text); cursor: pointer;
            transition: all 0.2s ease;
        }
        .opt-item:active { 
            background: #f5f7fa; border-color: var(--primary); 
            transform: scale(0.98); 
        }

        /* è¿›åº¦æ¡ */
        .prog-wrap { width: 100%; height: 6px; background: #eee; border-radius: 3px; margin-bottom: 30px; }
        .prog-bar { height: 100%; background: var(--primary); border-radius: 3px; transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1); }

        .bottom-btn {
            margin-top: auto; padding-top: 20px;
        }
        .submit-btn {
            width: 100%; background: #1d1d1f; color: white;
            border: none; padding: 20px; border-radius: 18px;
            font-size: 1.1rem; font-weight: 600; cursor: pointer;
        }

        #result-page { 
            display: none; position: fixed; inset: 0; 
            background: white; z-index: 1000; padding: 30px 24px; 
            overflow-y: auto; color: var(--text);
        }
        .loading-text { display: none; text-align: center; font-weight: 500; color: #86868b; margin-top: 20px; }
    </style>
</head>
<body>

<div class="main-card" id="app">
    <div class="header">ä½“æ€æ·±åº¦è¯„ä¼°</div>

    <div class="auth-box">
        <input type="text" id="activationCode" placeholder="è¾“å…¥ 12-16 ä½æ¿€æ´»ç ">
        <div class="auth-tip">éªŒè¯æˆåŠŸåå°†è‡ªåŠ¨è§£é” AI æ·±åº¦æŠ¥å‘Š</div>
    </div>

    <div class="prog-wrap"><div class="prog-bar" id="prog-bar" style="width: 5%;"></div></div>

    <div id="quiz-part">
        <div class="section-label" id="quiz-step">STEP 1 / 20</div>
        <div class="question-title" id="quiz-q">æ­£åœ¨åŠ è½½é—®é¢˜...</div>
        <div class="opt-list" id="opts-box"></div>
    </div>

    <div id="status-part" style="display:none;">
        <div class="section-label">æœ€åä¸€æ­¥</div>
        <div class="question-title">è¡¥å……æ‚¨çš„èº«ä½“æ„Ÿå—æˆ–æ—¢å¾€ä¼¤ç—…</div>
        <textarea id="extra-info" style="width:100%; border:1.5px solid #e5e5e7; border-radius:16px; height:120px; padding:15px; font-size:1rem;" placeholder="å¦‚ï¼šä¹…åé¢ˆæ¤é…¸ç—›ã€è†ç›–å¼¹å“ç­‰..."></textarea>
    </div>

    <div class="bottom-btn">
        <button class="submit-btn" id="final-btn" onclick="handleVerify()" style="display:none;">ç«‹å³ç”Ÿæˆæ·±åº¦åˆ†æ</button>
        <div id="loading" class="loading-text">ğŸš€ AI æ­£åœ¨å¤„ç†æ‚¨çš„ä½“æ€æ¨¡å‹...</div>
    </div>
</div>

<div id="result-page">
    <div id="md-body" style="line-height: 1.8;"></div>
    <button onclick="location.reload()" style="width:100%; padding:18px; border:none; background:#f5f7fa; border-radius:16px; font-weight:600; margin-top:40px;">å®Œæˆå¹¶é€€å‡º</button>
</div>

<script>
    const DEEPSEEK_KEY = "sk-d37975a862d84a7580adf1759cee3a1a"; // ğŸš¨ è®°å¾—å¡«å…¥ä½ çš„ Key

    const questions = [
        { q: "æ‚¨çš„ä¸»è¦æ€§åˆ«ï¼Ÿ", opts: ["å¥³ç”Ÿ", "ç”·ç”Ÿ"] },
        { q: "ä¾§èº«è§‚å¯Ÿï¼Œè€³å‚æ˜¯å¦æ˜æ˜¾åœ¨è‚©è†€å‰æ–¹ï¼Ÿ", opts: ["å¤´å‰ä¼¸ï¼ˆæ‰‹æœºé¢ˆï¼‰", "åŸºæœ¬å‚ç›´", "ä¸ç¡®å®š"] },
        { q: "è‡ªç„¶ç«™ç«‹æ—¶ï¼Œæ‰‹æŒå¿ƒçš„é»˜è®¤æœå‘ï¼Ÿ", opts: ["å‘åï¼ˆåœ†è‚©ä»£å¿ï¼‰", "å‘å†…ä¾§ï¼ˆæ­£å¸¸ï¼‰", "ç•¥å¾®å‘å"] },
        { q: "é•œå­ä¸­è§‚å¯Ÿï¼Œé”éª¨çš„æ•´ä½“çº¿æ¡ï¼Ÿ", opts: ["æ˜æ˜¾çš„ V å‹", "å¹³ç›´çš„ä¸€å­—å‹", "çœ‹ä¸æ¸…/ä¸æ˜æ˜¾"] },
        { q: "åŒè‚©æ˜¯å¦æœ‰æ˜æ˜¾çš„é«˜ä½ä¸ä¸€ï¼Ÿ", opts: ["å·¦è‚©åé«˜", "å³è‚©åé«˜", "åŸºæœ¬æŒå¹³"] },
        { q: "é å¢™ç«™ç«‹ï¼Œåè„‘å‹ºèƒ½å¦è‡ªç„¶è´´å¢™ï¼Ÿ", opts: ["è´´ä¸åˆ°", "è½»æ¾è´´åˆ°", "è´´åˆ°ä½†æ„Ÿè§‰è„–å­å‘ç´§"] },
        { q: "è…°éƒ¨ä¸å¢™é¢çš„ç©ºéš™å¤§å°ï¼Ÿ", opts: ["å¯å¡è¿›æ•´ä¸ªæ‹³å¤´", "å¯å¡è¿›ä¸€ä¸ªæ‰‹æŒ", "å‡ ä¹å®Œå…¨è´´åˆ"] },
        { q: "æ˜¯å¦æœ‰â€œå››è‚¢ä¸èƒ–ä½†å°è…¹å‡¸å‡ºâ€çš„æƒ…å†µï¼Ÿ", opts: ["éå¸¸æ˜æ˜¾", "è½»å¾®", "å®Œå…¨æ²¡æœ‰"] },
        { q: "æ˜¯å¦æœ‰ä¹ æƒ¯æ€§éª¨ç›†æ—‹è½¬ï¼ˆè£¤å¤´æ­ªï¼‰ï¼Ÿ", opts: ["æœ‰", "æ²¡æœ‰", "ä¸ç¡®å®š"] },
        { q: "å¹¶è„šä¸‹è¹²æ—¶ï¼Œè„šåè·Ÿèƒ½è¸©å®åœ°é¢å—ï¼Ÿ", opts: ["è¸©ä¸å®ï¼ˆä¼šå¾€åå€’ï¼‰", "è½»æ¾è¸©å®", "æ¯”è¾ƒå‹‰å¼º"] },
        { q: "è§‚å¯Ÿå¸¸ç©¿çš„é‹åº•ï¼Œç£¨æŸä½ç½®ï¼Ÿ", opts: ["å¤–ä¾§ç£¨æŸä¸¥é‡", "å†…ä¾§ç£¨æŸä¸¥é‡", "ç£¨æŸè¾ƒå‡åŒ€"] },
        { q: "ä¹…åä¸€å°æ—¶åï¼Œæœ€å…ˆé…¸ç—›çš„ä½ç½®ï¼Ÿ", opts: ["é¢ˆå/æ–œæ–¹è‚Œ", "ä¸‹è…°éƒ¨/éª¶éª¨", "è‡€éƒ¨/å¤§è…¿åä¾§"] },
        { q: "ç”Ÿæ´»ä¸­æ˜¯å¦æœ‰ç¿˜äºŒéƒè…¿çš„ä¹ æƒ¯ï¼Ÿ", opts: ["å‡ ä¹ä¸€ç›´ç¿˜", "å¶å°”ä¼šç¿˜", "ä»ä¸ç¿˜"] },
        { q: "åŒæ‰‹å‘åå‹¾ï¼ŒæŒ‡å°–èƒ½å¦äº’ç›¸ç¢°åˆ°ï¼Ÿ", opts: ["ç›¸å·®å¾ˆè¿œ", "å‹‰å¼ºç¢°åˆ°", "è½»æ¾æ‰£ä½"] },
        { q: "æ·±å‘¼å¸æ—¶ï¼Œè§‚å¯Ÿèº«ä½“èµ·ä¼ï¼Ÿ", opts: ["åªæœ‰èƒ¸å£åœ¨åŠ¨", "è…¹éƒ¨æ˜æ˜¾èµ·ä¼", "ä¸¤è€…éƒ½æœ‰"] },
        { q: "é™æ€ç«™ç«‹æ—¶ï¼Œé‡å¿ƒä¹ æƒ¯åå‘å“ªä¸€è¾¹ï¼Ÿ", opts: ["å·¦è…¿æ ¸å¿ƒå—åŠ›", "å³è…¿æ ¸å¿ƒå—åŠ›", "åŒè…¿å—åŠ›å‡åŒ€"] },
        { q: "èƒŒéƒ¨è‚©èƒ›éª¨æ˜¯å¦åƒâ€œå°ç¿…è†€â€èˆ¬çªèµ·ï¼Ÿ", opts: ["æ˜æ˜¾å‡¸èµ·ï¼ˆç¿¼çŠ¶è‚©ï¼‰", "å¹³æ•´è´´åˆ", "ç•¥å¾®å‡¸èµ·"] },
        { q: "è½¬åŠ¨è„–å­æˆ–è‚©è†€æ—¶æ˜¯å¦æœ‰å“å£°ï¼Ÿ", opts: ["ç»å¸¸æœ‰å“å£°", "å®Œå…¨æ²¡æœ‰", "å¶å°”ä¼šæœ‰"] },
        { q: "æ¯æ—¥ä½å¤´å¤„ç†æ‰‹æœº/ç”µè„‘çš„æ—¶é•¿ï¼Ÿ", opts: ["8 å°æ—¶ä»¥ä¸Š", "4-8 å°æ—¶", "4 å°æ—¶ä»¥å†…"] },
        { q: "ç»ƒä¹ ç¯å¢ƒåå¥½ï¼Ÿ", opts: ["å±…å®¶ï¼ˆé›¶å™¨æ¢°ï¼‰", "å¥èº«æˆ¿ï¼ˆå…¨å™¨æï¼‰"] }
    ];

    let currentIdx = 0;
    let answers = [];

    function renderQuiz() {
        const q = questions[currentIdx];
        document.getElementById('quiz-step').innerText = `STEP ${currentIdx + 1} / 20`;
        document.getElementById('quiz-q').innerText = q.q;
        document.getElementById('prog-bar').style.width = ((currentIdx + 1) / 20) * 100 + '%';
        
        const box = document.getElementById('opts-box');
        box.innerHTML = '';
        q.opts.forEach(o => {
            const div = document.createElement('div');
            div.className = 'opt-item';
            div.innerText = o;
            div.onclick = () => {
                answers.push(`${q.q}: ${o}`);
                if(currentIdx < 19) {
                    currentIdx++; renderQuiz();
                } else {
                    document.getElementById('quiz-part').style.display = 'none';
                    document.getElementById('status-part').style.display = 'block';
                    document.getElementById('final-btn').style.display = 'block';
                    document.getElementById('prog-bar').style.width = '100%';
                }
            };
            box.appendChild(div);
        });
    }

    async function handleVerify() {
        const code = document.getElementById('activationCode').value;
        const parts = code.split('-');
        if(parts.length !== 2) return alert("æ¿€æ´»ç æ ¼å¼é”™è¯¯ï¼ˆéœ€åŒ…å«ä¸€ä¸ªæ¨ªæ ï¼‰");

        const sum1 = parts[0].split('').reduce((a, b) => a + b.charCodeAt(0), 0);
        const sum2 = parts[1].split('').reduce((a, b) => a + b.charCodeAt(0), 0);

        if(sum1 !== 543 || sum2 !== 618) return alert("æ¿€æ´»ç æ— æ•ˆï¼Œè¯·æ£€æŸ¥ï¼");

        document.getElementById('loading').style.display = 'block';
        const extra = document.getElementById('extra-info').value;

        try {
            const res = await fetch("https://api.deepseek.com/chat/completions", {
                method: "POST",
                headers: { "Content-Type": "application/json", "Authorization": `Bearer ${DEEPSEEK_KEY}` },
                body: JSON.stringify({
                    model: "deepseek-chat",
                    messages: [
                        {role: "system", content: "ä½ æ˜¯ä¸€ä½ç²¾é€šä½“æ€çº æ­£çš„ä¸“å®¶ã€‚"},
                        {role: "user", content: `æµ‹è¯„æ•°æ®ï¼š${answers.join('; ')}ã€‚ç°çŠ¶ï¼š${extra}ã€‚è¯·ç»™å‡ºä¸€ä»½ä¸“ä¸šçš„çº æ­£æŠ¥å‘Šã€‚`}
                    ]
                })
            });
            const data = await res.json();
            document.getElementById('md-body').innerHTML = marked.parse(data.choices[0].message.content);
            document.getElementById('result-page').style.display = 'block';
        } catch(e) {
            alert("è¯·æ±‚å¤±è´¥ï¼Œè¯·æ£€æŸ¥ API é…ç½®æˆ–ç½‘ç»œã€‚");
            document.getElementById('loading').style.display = 'none';
        }
    }

    window.onload = renderQuiz;
</script>
</body>
</html>
